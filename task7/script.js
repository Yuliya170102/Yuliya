let ads = [

 {

   id: '1',
   description: 'Скидка на женский спортивный костюм -20%',
   createdAt: new Date('2021-03-16T23:00:00'),
   link: 'https://sisters.by/catalog/clothing/sportivnye-kostyumy/komplekt-20-24-2.html',
   vendor: 'Sisters',
   photoLink: 'https://sisters.by/_thumbs/items-product_page_item_mobile/icon-147870.jpg',
   validUntil: new Date('2021-04-16T23:00:00'),
   discount: '20%',
   hashTags: ['одежда'],
   rating: 5.0,
   reviews :[]

 },
{

   id: '2',
   description: 'Скидка на свитер -58%',
   createdAt: new Date('2021-03-01T23:00:00'),
   link: 'https://www.lamoda.by/p/by004ewllwn1/clothes-byswan-sviter/',
   vendor: 'lamoda',
   photoLink: 'https://a.lmcdn.ru/img600x866/B/Y/BY004EWLLWN1_12690724_2_v1_2x.jpg',
   validUntil: new Date('2021-03-24T23:00:00'),
   discount: '58%',
   hashTags: ['одежда'],
   rating: 4.6,
   reviews :[]

 },
 {

   id: '3',
   description: 'Скидка на блузку -40%',
   createdAt: new Date('2021-03-16T23:00:00'),
   link: 'https://sisters.by/catalog/clothing/bluzki-i-rubashki/bluzka-vit-21-1611x.html',
   vendor: 'Sisters',
   photoLink: 'https://sisters.by/_thumbs/items-product_page_item_mobile/icon-148023.jpg',
   validUntil: new Date('2021-04-16T23:00:00'),
   discount: '40%',
   hashTags: ['одежда'],
   rating: 3.0,
   reviews :[]

 },
 {

   id: '4',
   description: 'Скидка на стайлер POLARIS -45%',
   createdAt: new Date('2021-03-01T23:00:00'),
   link: 'https://sila.by/bt/stajlery/POLARIS/phs_2405k_',
   vendor: 'Электросила',
   photoLink: 'https://sila.by/img/catalog2015/bt/tovar70534.jpg',
   validUntil: new Date('2021-04-15T23:00:00'),
   discount: '45%',
   hashTags: ['техника'],
   rating: 4.0,
   reviews :[]

 },
 {

   id: '5',
   description: 'Скидка на вытяжку BOSCH -20%',
   createdAt: new Date('2021-02-27T23:00:00'),
   link: 'https://sila.by/vt/vytyazhki/BOSCH/dhi642eq',
   vendor: 'Электросила',
   photoLink: 'https://sila.by/img/catalog2015/vt/tovar69256.jpg',
   validUntil: new Date('2021-03-31T23:00:00'),
   discount: '20%',
   hashTags: ['техника'],
   rating: 3.0,
   reviews :[]

 },
 {

   id: '6',
   description: 'Скидка на книгу "Взламывая мозг" -7%',
   createdAt: new Date('2021-03-01T23:00:00'),
   link: 'https://oz.by/books/more10976092.html',
   vendor: 'OZ',
   photoLink: 'https://s2-goods.ozstatic.by/2000/92/976/10/10976092_0.jpg',
   validUntil: new Date('2021-03-30T23:00:00'),
   discount: '7%',
   hashTags: ['книга'],
   rating: 0.0,
   reviews :[]

 },
 {

   id: '7',
   description: 'Скидка на книгу "Метро 2033" -20%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://oz.by/books/more10796109.html',
   vendor: 'OZ',
   photoLink: 'https://s5-goods.ozstatic.by/2000/109/796/10/10796109_0.jpg',
   validUntil: new Date('2021-04-28T23:00:00'),
   discount: '20%',
   hashTags: ['книга'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '8',
   description: 'Скидка на гель для душа -35%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://oz.by/showergels/more10843275.html',
   vendor: 'OZ',
   photoLink: 'https://s3-goods.ozstatic.by/2000/275/843/10/10843275_0.jpg',
   validUntil: new Date('2021-04-30T23:00:00'),
   discount: '35%',
   hashTags: ['косметика'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '9',
   description: 'Скидка на нож -15%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://oz.by/knives/more10967891.html',
   vendor: 'OZ',
   photoLink: 'https://s1-goods.ozstatic.by/2000/891/967/10/10967891_0.jpg',
   validUntil: new Date('2021-03-28T23:00:00'),
   discount: '15%',
   hashTags: ['посуда'],
   rating: 0.0,
   reviews :[]

 },
 {

   id: '10',
   description: 'Скидка на матрас -46%',
   createdAt: new Date('2021-03-03T23:00:00'),
   link: 'https://pinskdrev.by/catalog/tolko-onlayn/matrasyi-mayya---sale/',
   vendor: 'Пинскдрев',
   photoLink: 'https://pinskdrev.by/web/files/imagick_cache/w580h580t3/web/catalogfiles/catalog/products/66df0686cefd8923ece4c7c790b4dafa.jpg',
   validUntil: new Date('2021-06-15T23:00:00'),
   discount: '46%',
   hashTags: ['матрасы'],
   rating: 0.0,
   reviews :[]

 },
 {

   id: '11',
   description: 'Скидка на игру "Grand Theft Auto V" -58%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://hot-game.info/game/grand-theft-auto-5',
   vendor: 'Hot Game',
   photoLink: 'https://hot-game.info/uploads/media/game/0001/10/thumb_9474_game_poster.jpeg',
   validUntil: new Date('2021-08-30T23:00:00'),
   discount: '58%',
   hashTags: ['игры'],
   rating: 4.0,
   reviews :[]

 },
 {

   id: '12',
   description: 'Скидка на игру "Playerunknown Battlegrounds" -19%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://hot-game.info/game/Playerunknowns-Battlegrounds',
   vendor: 'Hot Games',
   photoLink: 'https://hot-game.info/uploads/media/game/0001/07/thumb_6545_game_poster2.jpeg',
   validUntil: new Date('2021-06-30T23:00:00'),
   discount: '19%',
   hashTags: ['игры'],
   rating: 4.0,
   reviews :[]

 },
 {

   id: '13',
   description: 'Скидка на игру "S.T.A.L.K.E.R.: Bundle" -90%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://hot-game.info/game/STALKER-Bundle',
   vendor: 'Hot Games',
   photoLink: 'https://hot-game.info/uploads/media/game/0001/34/thumb_33884_game_poster.jpeg',
   validUntil: new Date('2021-04-20T23:00:00'),
   discount: '90%',
   hashTags: ['игры'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '14',
   description: 'Скидка на мягкую игрушку -15%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://buslik.by/catalog/igrushki_i_igry/myagkie_igrushki/myagkie_zverushki/osminog_v_assort_malvina_15_141_1_6/',
   vendor: 'Буслик',
   photoLink: 'https://buslik.by/upload/slam.image/iblock/589/5899e80c097d5ba77cc6467364b6c6ce-90.jpg',
   validUntil: new Date('2021-04-23T23:00:00'),
   discount: '15%',
   hashTags: ['игрушки'],
   rating: 0.0,
   reviews :[]

 },
 {

   id: '15',
   description: 'Скидка на куклу -50%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://buslik.by/catalog/igrushki_i_igry/kukly_i_aksessuary/kukly_1/mini_kukly/kukla_dong_huan_big_tree_toys_12sm/',
   vendor: 'Буслик',
   photoLink: 'https://buslik.by/upload/slam.image/iblock/a86/a86cec311e22d4396acf8b86e9f5efec-90.jpg',
   validUntil: new Date('2021-05-10T23:00:00'),
   discount: '50%',
   hashTags: ['игрушки'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '16',
   description: 'Скидка на LEGO -15%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://buslik.by/catalog/igrushki_i_igry/konstruktory/lego/konstruktor_kosmicheskiy_robot_dlya_gornykh_rabot_327_detaley_lego_creator_31115/',
   vendor: 'Буслик',
   photoLink: 'https://buslik.by/upload/slam.image/iblock/ec4/ec4f0a6d7445e05aa2dd7bfb3a61306f-90.jpg',
   validUntil: new Date('2021-03-30T23:00:00'),
   discount: '15%',
   hashTags: ['игрушки'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '17',
   description: 'Скидка на витамины -50%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://www.iherb.com/pr/California-Gold-Nutrition-Andrographis-Immune-with-AP-BIO-100-mg-120-Tablets/101059',
   vendor: 'iHerb',
   photoLink: 'https://s3.images-iherb.com/cgn/cgn01819/v/10.jpg',
   validUntil: new Date('2021-04-15T23:00:00'),
   discount: '50%',
   hashTags: ['здоровье'],
   rating: 4.0,
   reviews :[]

 },
 {

   id: '18',
   description: 'Скидка на витамины -50%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://www.iherb.com/pr/Now-Foods-High-Potency-Vitamin-D-3-125-mcg-5-000-IU-120-Softgels/10421',
   vendor: 'iHerb',
   photoLink: 'https://s3.images-iherb.com/now/now00372/v/27.jpg',
   validUntil: new Date('2021-05-04T23:00:00'),
   discount: '50%',
   hashTags: ['здоровье'],
   rating: 5.0,
   reviews :[]

 },
 {

   id: '19',
   description: 'Скидка на женские джинсы -36%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://www.wildberries.ru/catalog/15537164/detail.aspx?targetUrl=BP',
   vendor: 'ТВОЕ',
   photoLink: 'https://images.wbstatic.net/c516x688/new/15530000/15537164-1.jpg',
   validUntil: new Date('2021-06-12T23:00:00'),
   discount: '36%',
   hashTags: ['одежда'],
   rating: 4.0,
   reviews :[]

 },
 {

   id: '20',
   description: 'Скидка на платье -12%',
   createdAt: new Date('2021-03-15T23:00:00'),
   link: 'https://www.wildberries.ru/catalog/19126078/detail.aspx?targetUrl=BP',
   vendor: 'ТВОЕ',
   photoLink: 'https://images.wbstatic.net/c516x688/new/19120000/19126078-1.jpg',
   validUntil: new Date('2021-03-25T23:00:00'),
   discount: '12%',
   hashTags: ['одежда'],
   rating: 5.0,
   reviews :[]

 },
 ]

class AdList {
    _adList = [];
    constructor(adList = []) {
        this.addAll(adList);
    }
    getPage(skip = 0, top = 10, filterConfig = null) {
        if(typeof skip !== "number" || typeof top !== "number" || typeof filterConfig !== "object"){
            console.log('Incorrect parameters!');
            return false;
        }
        let result = [];
        if (!filterConfig) {
            result = this._adList.slice(skip, skip + top);
        } else {
            for (let i = 0; i < this._adList.length; i++) {
                if ((filterConfig.fromDate === undefined || this._adList[i].createdAt >= filterConfig.fromDate)
                    && (filterConfig.toDate === undefined || this._adList[i].createdAt <= filterConfig.toDate)
                    && (filterConfig.vendor === undefined || this._adList[i].vendor === filterConfig.vendor)) {

                    if (filterConfig.tags.
                            every(tagNeed =>
                                this._adList[i].hashTags.find(tag => tag === tagNeed) !== undefined)) {
                        result.push(this._adList[i]);
                    }
                }

            }
        }
        return result.slice(skip, skip + top);
    }

    get(idFind) {
        if(typeof idFind !== "string"){
            return err;
        }
        return this._adList.find(item => item.id === idFind);
    }

    add(adItem) {
        if(typeof adItem !== "object"){
            return err;
        }
        if (AdList._validateAd(adItem) &&
                this._adList.find(item => item.id === adItem.id && item !== adItem) === undefined) {
            this._adList.push(adItem);
            return true;
        } else {
            return false;
        }
    }

    addAll(adList){
        if(!(Array.isArray(adList))){
            return false;
        }
        let incorrectItem = [];
        adList.forEach(value =>  this.add(value)? true : incorrectItem.push(value));
        return incorrectItem;
    }

    edit(id, adItem) {
        if(typeof id !== "string" || typeof adItem !== "object"){
            return "Incorrect parametrs";
            return false;
        }
        let editableItem = this.get(id);
        const resultItem = Object.assign(editableItem, adItem);
        if (AdList._validateAd(resultItem)) {
            editableItem = resultItem;
            return true;
        } else {
            return false;
        }
    }

    remove(id) {
        if(typeof id !== "string"){
            return err;
        }
        const index = this._adList.findIndex(value => value.id === id);
        if (index !== -1) {
            this._adList.splice(index, 1);
            return true;
        } else {
            return false;
        }
    }

    clear(){
        this._adList.splice(0, this._adList.length);
    }

    static _validateAd(adItem) {
        if(typeof adItem !== "object"){
            return err;
        }
       return adItem.id !== undefined && typeof adItem.id == "string"
            && adItem.description !== undefined && typeof adItem.description == "string"
            && adItem.description.length < 200
            && adItem.createdAt !== undefined && adItem.createdAt instanceof Date
            && adItem.link !== undefined && typeof adItem.link == "string"
            && adItem.vendor !== undefined && typeof adItem.vendor == "string"
            && adItem.vendor.trim() !== ""
            && adItem.hashTags !== undefined && Array.isArray(adItem.hashTags)
            && adItem.discount !== undefined && typeof adItem.discount == "string"
            && adItem.validUntil !== undefined && adItem.createdAt instanceof Date;
    }
}

let adList = new AdList(ads);

let newAd1 = {
         id: '21',
    description: 'Скидка на шариковую ручку 17%',
    createdAt: new Date('2021-03-15T23:00:00'),
    link: 'https://oz.by/pens/more10846624.html',
    vendor: 'OZ',
    photoLink: 'https://s3-goods.ozstatic.by/2000/624/846/10/10846624_0.jpg',
    validUntil: new Date('2021-05-06T23:00:00'),
    discount: '17%',
    hashTags: ['канцтовары'],
    rating: 5.0,
    reviews:[]
}

let newList = [
    {
        id: '21',
        description: 'Скидка на шорты 45%',
        createdAt: new Date('2021-03-05T23:00:00'),
        link: 'https://www.zara.com/ru/ru/%D1%88%D0%BE%D1%80%D1%82%D1%8B-%D0%B1%D0%BE%D0%BA%D1%81%D0%B5%D1%80%D1%8B-%D0%B8%D0%B7-%D0%B8%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9-%D0%BA%D0%BE%D0%B6%D0%B8-p04387121.html?v1=87577227&v2=1750761',
        vendor: 'ZARA',
        photoLink: 'https://static.zara.net/photos///2021/V/0/1/p/4387/121/800/2/w/1280/4387121800_1_1_1.jpg?ts=1610978003712',
        validUntil: new Date('2021-04-05T23:00:00'),
        discount: '45%',
        hashTags: ['одежда'],
        rating: 3.0,
        reviews: []
    },
    {
        id: '22',
        description: 'Скидка на платье 50%',
        createdAt: new Date('2021-03-05T23:00:00'),
        link: 'https://www.zara.com/ru/ru/%D0%BF%D0%BB%D0%B0%D1%82%D1%8C%D0%B5-%D0%B8%D0%B7-%D1%82%D1%80%D0%B8%D0%BA%D0%BE%D1%82%D0%B0%D0%B6%D0%B0-%D0%B2-%D1%80%D1%83%D0%B1%D1%87%D0%B8%D0%BA-p01165040.html?v1=93809375&v2=1750761',
        vendor: 'ZARA',
        photoLink: 'https://static.zara.net/photos///2021/V/0/1/p/1165/040/600/2/w/1280/1165040600_1_1_1.jpg?ts=1613725047786',
        validUntil: new Date('2021-04-05T23:00:00'),
        discount: '50%',
        hashTags: ['одежда'],
        rating: 5.0,
        reviews: []
    }
];

    console.log('get');
    console.log(adList.get('3'));

    console.log('getPage');
    console.log(adList.getPage(0, 10));
    console.log(adList.getPage(0, 10, { tags: ["игры"]}));


    console.log('add');
    console.log(adList.add(newAd1));

    console.log('edit');
    console.log(adList.edit('3', { discount: '20%' }));
    console.log(adList.edit(5, { discount: '20%' }));
    console.log(adList.edit('7', { id: '40' }));

    console.log('remove');
    console.log(adList.remove('8'));
    console.log(adList.getPage(0, 10));

    console.log('adAll');
    console.log(adList.addAll(newList));
    console.log(adList.addAll(2));

    console.log('clear');
    console.log(adList.clear());